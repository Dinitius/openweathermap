(this.webpackJsonpopenweathermap=this.webpackJsonpopenweathermap||[]).push([[0],{17:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a(9),r=a(5),o=a(2),s=a(19),i=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,34)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,r=t.getLCP,o=t.getTTFB;a(e),c(e),n(e),r(e),o(e)}))},l=a(16),d=a(3),j="CARD/CREATE_CARD",u="CARD/LOCAL_CARD",b="CARD/REMOVE_CARD",m="CARD/SHOW_MORE",h=a(4),p=a.n(h),O=a(6),f="34f77aee4b9d8e4a73495da7c1093aab";function x(e,t,a){return function(){var c=Object(O.a)(p.a.mark((function c(n){var r,o;return p.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,fetch("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(t,"&lon=").concat(e,"&lang=ru&units=metric&appid=").concat(f));case 2:return r=c.sent,c.next=5,r.json();case 5:if(o=c.sent,r.ok){c.next=8;break}throw new Error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 ".concat(r.status));case 8:n({type:m,payload:o,city:a});case 9:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}function g(e){return function(t){t({type:b,payload:e})}}function v(e){return function(){var t=Object(O.a)(p.a.mark((function t(a){var c,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(e.location,"&").concat(e.index,"&lang=ru&units=metric&appid=").concat(f));case 2:return c=t.sent,t.next=5,c.json();case 5:if(n=t.sent,console.log(c),c.ok){t.next=9;break}throw new Error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 ".concat(c.status));case 9:a({type:j,payload:n});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var w=function(e){var t=e.x,a=e.y;return function(){var e=Object(O.a)(p.a.mark((function e(c){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(a,"&lon=").concat(t,"&lang=ru&units=metric&appid=").concat(f));case 2:return n=e.sent,e.next=5,n.json();case 5:if(r=e.sent,n.ok){e.next=8;break}throw new Error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 ".concat(n.status));case 8:c({type:u,payload:r});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},y={cards:[],localCard:[],cardInfo:[]},C=function(e,t){var a=e.cards.findIndex((function(e){return e.id===t}));return Object(d.a)(Object(d.a)({},e),{},{cards:[].concat(Object(l.a)(e.cards.slice(0,a)),Object(l.a)(e.cards.slice(a+1)))})},N=function(){var e=Object(o.c)();window.onload=function(){navigator.geolocation.getCurrentPosition((function(t){var a=t,c={x:a.coords.longitude,y:a.coords.latitude};console.log(c),e(w(c))}))}},k=Object(r.c)({createCards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(d.a)(Object(d.a)({},e),{},{cards:e.cards.concat(t.payload)});case u:return Object(d.a)(Object(d.a)({},e),{},{localCard:e.localCard.concat(t.payload)});case b:return C(e,t.payload);case m:return Object(d.a)(Object(d.a)({},e),{},{cardInfo:e.cardInfo.concat(Object(d.a)(Object(d.a)({},t.payload),{},{name:t.city}))});default:return e}}}),S=a(8),I=a(0),M={createCard:v,removeCard:g,showMore:x},R=Object(o.b)((function(e){return{allCards:e.createCards.cards}}),M)((function(e){var t=e.allCards,a=e.handleModal,c=Object(o.c)(),n=t;return Object(I.jsx)("ul",{children:n.length?n&&n.map((function(e,t){return Object(I.jsxs)("li",{className:"newCard mb-3",children:[Object(I.jsx)("div",{className:"card border border-secondary col-9",onClick:Object(O.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c(x(e.coord.lon,e.coord.lat,e.name));case 2:a();case 3:case"end":return t.stop()}}),t)}))),id:e.id.toString(),children:Object(I.jsxs)("div",{className:"card-body",children:[Object(I.jsx)("h5",{className:"location",children:e.name}),Object(I.jsx)("p",{className:"weather fs-4",children:Math.round(e.main.temp)}),Object(I.jsx)("img",{src:"http://openweathermap.org/img/wn/".concat(e.weather[0].icon,".png"),alt:"img"})]})}),Object(I.jsx)("img",{src:"https://i.ibb.co/gVnqTZf/delete.png",alt:"delete",className:"del",onClick:function(){return c(g(e.id))}})]},t)})):""})})),A=a(11),D=(a(17),{createCard:v}),E=Object(o.b)(null,D)((function(e){var t=e.closeModal,a=Object(o.c)(),n=Object(c.useState)({location:"",index:""}),r=Object(S.a)(n,2),s=r[0],i=r[1],l=function(e){i(Object(d.a)(Object(d.a)({},s),{},Object(A.a)({},e.target.name,e.target.value)))},j=s.location.length>0&&s.index.length>0;return Object(I.jsx)("div",{className:"mod modalAdd col-6",children:Object(I.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==s.location&&""!==s.index&&(v(s),t(),i({location:"",index:""}))},children:[Object(I.jsxs)("div",{className:"mb-5",children:[Object(I.jsx)("label",{htmlFor:"exampleInputEmail1",className:"form-label",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0433\u043e\u0440\u043e\u0434\u0430"}),Object(I.jsx)("input",{type:"text",className:"form-control",value:s.location,name:"location",onChange:l})]}),Object(I.jsxs)("div",{className:"mb-3 mb-5",children:[Object(I.jsx)("label",{htmlFor:"exampleInputPassword1",className:"form-label",children:"\u0418\u043d\u0434\u0435\u043a\u0441 \u0433\u043e\u0440\u043e\u0434\u0430"}),Object(I.jsx)("input",{type:"text",className:"form-control",value:s.index,name:"index",onChange:l})]}),Object(I.jsx)("button",{type:"submit",disabled:!j,className:"btn btn-primary",onClick:function(){return a(v(s))},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})})})),L=(a(32),Object(o.b)((function(e){var t=e.createCards.cardInfo.length-1;return{info:e.createCards.cardInfo[t]}}),null)((function(e){var t=e.info;return Object(I.jsxs)("div",{className:"mod modalInfo hide col-6",children:[Object(I.jsxs)("div",{className:"modalHeader mt-3 mb-5",children:[Object(I.jsx)("h3",{className:"cardTitle",children:t.name}),Object(I.jsx)("button",{className:"btn ",onClick:function(){document.querySelector(".modalInfo").classList.add("hide")},children:"X"})]}),Object(I.jsxs)("ul",{children:[Object(I.jsx)("li",{className:"newCard mb-3",children:Object(I.jsx)("div",{className:"card col-9",id:t.daily[0].dt.toString(),children:Object(I.jsxs)("div",{className:"card-body infoCardBody",children:[Object(I.jsx)("p",{className:"today",children:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f"}),Object(I.jsxs)("div",{className:"info",children:[Object(I.jsx)("p",{className:"weather mb-0 fs-4",children:Math.round(t.daily[0].temp.day)}),Object(I.jsx)("img",{src:"http://openweathermap.org/img/wn/".concat(t.daily[0].weather[0].icon,".png"),alt:"img"})]})]})})},t.daily[0].dt.toString()),Object(I.jsx)("li",{className:"newCard mb-3",children:Object(I.jsx)("div",{className:"card col-9",id:t.daily[1].dt.toString(),children:Object(I.jsxs)("div",{className:"card-body infoCardBody",children:[Object(I.jsx)("p",{className:"today",children:"\u0417\u0430\u0432\u0442\u0440\u0430"}),Object(I.jsxs)("div",{className:"info",children:[Object(I.jsx)("p",{className:"weather mb-0 fs-4",children:Math.round(t.daily[1].temp.day)}),Object(I.jsx)("img",{src:"http://openweathermap.org/img/wn/".concat(t.daily[1].weather[0].icon,".png"),alt:"img"})]})]})})},t.daily[1].dt.toString())]})]})}))),F={getLocalCard:w,showMore:x},T=Object(o.b)((function(e){return{local:e.createCards.localCard}}),F)((function(e){N();var t=Object(o.c)(),a=e.local,n=Object(c.useState)(!1),r=Object(S.a)(n,2),s=r[0],i=r[1],l=Object(c.useState)(!1),d=Object(S.a)(l,2),j=d[0],u=d[1],b=function(){i(!s)},m=function(){u(!s),document.querySelector(".modalInfo").classList.remove("hide")};return a.length?Object(I.jsx)("div",{className:"container pt-5",children:Object(I.jsxs)("div",{className:"row",children:[Object(I.jsxs)("div",{className:"col-8",children:[Object(I.jsx)("ul",{children:Object(I.jsx)("div",{className:"card border border-secondary col-9",children:Object(I.jsxs)("div",{className:"card-body",onClick:Object(O.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(x(a[0].lon,a[0].lat,"\u041c\u043e\u0435 \u041c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435"));case 2:m();case 3:case"end":return e.stop()}}),e)}))),children:[Object(I.jsx)("h5",{className:"location",children:"\u041c\u043e\u0435 \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435"}),Object(I.jsx)("p",{className:"weather fs-4",children:Math.round(a[0].current.temp)}),Object(I.jsx)("img",{src:"http://openweathermap.org/img/wn/".concat(a[0].current.weather[0].icon,".png"),alt:"img"})]})},Date.now().toString())}),Object(I.jsx)(R,{handleModal:m}),Object(I.jsx)("img",{src:"https://i.ibb.co/kqNTvRf/add.png",className:"addBtn",onClick:function(){b()},alt:"add"})]}),s&&Object(I.jsx)(E,{closeModal:b}),j&&Object(I.jsx)(L,{})]})}):Object(I.jsx)("p",{})})),q=Object(r.e)(k,Object(r.d)(Object(r.a)(s.a))),B=Object(I.jsx)(o.a,{store:q,children:Object(I.jsx)(T,{})});Object(n.render)(B,document.getElementById("root")),i()}},[[33,1,2]]]);
//# sourceMappingURL=main.0fecef3e.chunk.js.map